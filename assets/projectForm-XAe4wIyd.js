import{j as e,r as D,B as w}from"./index-1w7hjozq.js";import{E as I,C as h,a as y,b as A}from"./CustomFIleInput-eQwuR2RD.js";import{t as F}from"./toastHelper-DJmUWLY0.js";import{T as S,D as q,C as P}from"./CustomTable-BsSknQAq.js";const $=({onChange:o,onBlur:t,label:r,name:s,placeholder:m="",error:n,value:a="",required:l=!0})=>e.jsxs("div",{children:[e.jsxs("label",{className:"mb-3 block text-black dark:text-white",children:[r," "]}),e.jsx("textarea",{rows:6,placeholder:m,name:s,onBlur:t,value:a,onChange:o,required:l,className:"w-full rounded-lg border-[1.5px] border-primary bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:bg-form-input dark:text-white"}),e.jsx(I,{message:n})]}),L=(o,t)=>{const{handleDelete:r}=t,s=[e.jsx(q,{handleDelete:()=>r(o._id)},1)];return e.jsx(S,{actions:s})},V=o=>[{sortable:!0,name:"ID",selector:t=>t._id},{sortable:!0,name:"Name",selector:t=>t.name},{sortable:!0,name:"Color",cell:t=>e.jsx("span",{style:{background:t.color},className:"p-2 rounded-lg shadow-md",children:t.color})},{name:"Actions",cell:t=>L(t,o)}],R=(o,t)=>{const{values:r,setFieldValue:s}=t;return D.useEffect(()=>{o&&s("tags",(r==null?void 0:r.tags)||[])},[o,s,r==null?void 0:r.tags]),{handleIncrementTagsCount:()=>{s("tags",[...r.tags,{_id:"",name:"",color:""}])},handleDelete:l=>{const i=r.tags.filter(d=>d._id!==l);s("tags",i)},handleTagChange:(l,i,d)=>{const u=[...r.tags];u[l][i]=d,s("tags",u)}}},K=({inUpdate:o,formikObject:t,loading:r,formRef:s})=>{var x;const{handleSubmit:m,values:n,errors:a,handleBlur:l,setFieldValue:i,handleChange:d,isSubmitting:u}=t;F(r);const{handleIncrementTagsCount:E,handleDelete:B,handleTagChange:p}=R(o,t);return!r&&e.jsxs(e.Fragment,{children:[e.jsx(w,{pageName:o?"Edit Project":"Add Project"}),e.jsx("div",{className:"grid grid-cols-1 gap-9",children:e.jsx("div",{className:"flex flex-col gap-9",children:e.jsx("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:e.jsx("form",{ref:s,onSubmit:m,action:"#",children:e.jsxs("div",{className:"p-6.5",children:[e.jsx(h,{onBlur:l,onChange:d,value:n.name,label:"Name",required:!0,name:"name",invalid:a.name&&!0,error:a.name,placeholder:"Enter Project Name"}),e.jsx($,{onBlur:l,onChange:d,value:n.description,label:"Description",required:!0,name:"description",error:a.description,placeholder:"Enter Description"}),e.jsx(h,{onBlur:l,onChange:d,value:n.source_code_link,label:"Source Code Link",required:!0,name:"source_code_link",invalid:a.source_code_link&&!0,error:a.source_code_link,placeholder:"Enter Source Code Link"}),e.jsx(y,{onChange:g=>i("image",g.target.files[0]),name:"image",label:"Image",value:n.image}),(x=n==null?void 0:n.tags)==null?void 0:x.map((g,c)=>{var j,C,f,k,T,v,N,_;return e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(h,{name:`tags[${c}].name`,label:`Tag Name ${c+1}`,placeholder:"Enter Tag Name",error:(C=(j=a==null?void 0:a.tags)==null?void 0:j[c])==null?void 0:C.name,onBlur:l,required:!0,invalid:!!((k=(f=a==null?void 0:a.tags)==null?void 0:f[c])!=null&&k.name),type:"text",onChange:b=>p(c,"name",b.target.value),value:g.name}),e.jsx(h,{error:(v=(T=a==null?void 0:a.tags)==null?void 0:T[c])==null?void 0:v.color,onBlur:l,invalid:!!((_=(N=a==null?void 0:a.tags)==null?void 0:N[c])!=null&&_.color),required:!0,name:`tags[${c}].color`,label:`Tag Color ${c+1}`,placeholder:"Enter Tag Color",type:"color",onChange:b=>p(c,"color",b.target.value),value:g.color})]},c)}),e.jsx(P,{columns:V({handleDelete:B}),data:n.tags,title:"Tags",buttons:[e.jsx("button",{type:"button",onClick:E,className:"bg-red-500 p-2 text-white",children:"Add Tag"},0)]}),e.jsx(A,{disabled:u})]})})})})})]})};export{K as default};
