import{j as e,r as p,B as F}from"./index-D-guvsd-.js";import{E as $,C as u,a as L,b as R}from"./CustomFIleInput-CaYna5Zi.js";import{t as V}from"./toastHelper-DRz77vBP.js";import{T as z,D as G,C as H}from"./CustomTable-BMjpHIyA.js";const J=({onChange:s,onBlur:r,label:c,name:d,placeholder:g="",error:a,value:t="",required:l=!0})=>e.jsxs("div",{children:[e.jsxs("label",{className:"mb-3 block text-black dark:text-white",children:[c," "]}),e.jsx("textarea",{rows:6,placeholder:g,name:d,onBlur:r,value:t,onChange:s,required:l,className:"w-full rounded-lg border-[1.5px] border-primary bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:bg-form-input dark:text-white"}),e.jsx($,{message:a})]}),K=(s,r)=>{const{handleDelete:c}=r,d=[e.jsx(G,{handleDelete:()=>c(s._id)},1)];return e.jsx(z,{actions:d})},M=s=>[{sortable:!0,name:"ID",selector:r=>r._id},{sortable:!0,name:"Name",selector:r=>r.name},{sortable:!0,name:"Color",cell:r=>e.jsx("span",{style:{background:r.color},className:"p-2 rounded-lg shadow-md",children:r.color})},{name:"Actions",cell:r=>K(r,s)}],Y=({inUpdate:s,formikObject:r,loading:c,formRef:d})=>{const{handleSubmit:g,values:a,errors:t,handleBlur:l,setFieldValue:A,handleChange:i,isSubmitting:x}=r;console.log(a);const[j,C]=p.useState(1);V(c);const[b,h]=p.useState([{_id:"",name:"",color:""}]);p.useEffect(()=>{var n;s&&(h((a==null?void 0:a.tags)||[]),C(((n=a==null?void 0:a.tags)==null?void 0:n.length)||1))},[s]);const D=()=>{C(j+1)},I=n=>{h([...b,n])};console.log(x,"is Submitting");const q=[e.jsx("button",{onClick:()=>I,children:"add"},0)],P=n=>{const o=b.filter(m=>m._id!==n);h(o)};return!c&&e.jsxs(e.Fragment,{children:[e.jsx(F,{pageName:s?"Edit Project":"Add Project"}),e.jsx("div",{className:"grid grid-cols-1 gap-9",children:e.jsx("div",{className:"flex flex-col gap-9",children:e.jsx("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:e.jsx("form",{ref:d,onSubmit:g,action:"#",children:e.jsxs("div",{className:"p-6.5",children:[e.jsx(u,{onBlur:l,onChange:i,value:a.name,label:"Name",required:!0,name:"name",invalid:t.name&&!0,error:t.name,placeholder:"Enter Project Name"}),e.jsx(J,{onBlur:l,onChange:i,value:a.description,label:"Description",required:!0,name:"description",error:t.description,placeholder:"Enter Description"}),e.jsx(u,{onBlur:l,onChange:i,value:a.source_code_link,label:"Source Code Link",required:!0,name:"source_code_link",invalid:t.source_code_link&&!0,error:t.source_code_link,placeholder:"Enter Source Code Link"}),e.jsx(L,{onChange:n=>A("image",n.target.files[0]),name:"image",label:"Image",value:a.image}),Array.from({length:j}).map((n,o)=>{var m,f,k,T,N,_,v,E,B,y,S,w;return e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(u,{name:`tags[${o}].name`,label:`Tag Name ${o+1}`,placeholder:"Enter Tag Name",error:(f=(m=t==null?void 0:t.tags)==null?void 0:m[o])==null?void 0:f.name,onBlur:l,required:!0,invalid:!!((T=(k=t==null?void 0:t.tags)==null?void 0:k[o])!=null&&T.name),type:"text",onChange:i,value:((_=(N=a==null?void 0:a.tags)==null?void 0:N[o])==null?void 0:_.name)||""}),e.jsx(u,{error:(E=(v=t==null?void 0:t.tags)==null?void 0:v[o])==null?void 0:E.color,onBlur:l,invalid:!!((y=(B=t==null?void 0:t.tags)==null?void 0:B[o])!=null&&y.color),required:!0,name:`tags[${o}].color`,label:`Tag Color ${o+1}`,placeholder:"Enter Tag Color",type:"color",onChange:i,value:((w=(S=a==null?void 0:a.tags)==null?void 0:S[o])==null?void 0:w.color)||""})]},o)}),e.jsx(H,{columns:M(P),data:b,title:"Tags",buttons:q}),e.jsx("button",{type:"button",onClick:D,className:"text-blue-500 hover:underline",children:"Add Another Tag"}),e.jsx(R,{disabled:x})]})})})})})]})};export{Y as default};
